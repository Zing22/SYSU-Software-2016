{% extends "base.html" %}
{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="/static/css/detail.css">
{% endblock %}


{% block container %}
<span id="design-id" style="display: none;">{{design.id}}</span> <!-- given by jinja2 -->
<!-- put code here with-->
<div class="ui column grid centered">
  <div class="ui banner one column fluid centered">
  </div>
</div> <!-- top banner -->

<div class="ui column grid">
  <!-- designs -->
  <div class="ui column sixteen wide main">
    <div class="ui segment main">
      <div class="design card {% if not info['myCreation'] %}my{% endif %}">
        <div class="ui column grid design" design-id="{{design.id}}">
          <div class="ui row">
            <div class="eleven wide column">
              <h3 class="ui header">
                <img src="/static/img/icon/{{session.get('icon')}}.jpg" class="ui rounded image mini">&nbsp;
                <a href="/user/{{design.owner_id}}" class="user">{{design.owner.nickname}}</a> - {{design.design_name}}
                [{% if design.design_mode == "make" %}Products{% elif design.design_mode == "resolve" %}Substrates{% endif %}]
                {% if not design.shared %}<span title="Private design"><i class="ui icon lock"></i></span>{% endif %}
                {% if design.needHelp %}<span title="Help wanted"><i class="ui icon users"></i></span>{% endif %}

              </h3>
            </div>

            <div class="five wide column right aligned">
              <div class="ui labeled button mini like">
                <div class="ui red button" title="{% if not info['liked'] %}Like it{% else %}Liked{% endif %}">
                  <i class="{% if not info['liked'] %}empty{% endif %} heart icon"></i>
                </div>
                <a class="ui basic red left pointing label">
                  {{ info['like_num'] }}
                </a>
              </div>
              <button class="ui icon button tiny basic orange mark" title="{% if not info['marked'] %}Mark it{% else %}Marked{% endif %}">
                <i class="{% if not info['marked'] %}empty{% endif %} star icon"></i>
              </button>
              {% if design.owner_id == session.get("user") %}
              <button class="ui icon button tiny basic share {% if design.shared %}brown{% else %}gray{% endif %}" title="{% if design.shared %}Shared{% else %}Share it now!{% endif %}">
                <i class="share sign icon"></i>
              </button>
              <button class="ui icon button tiny basic delete red">
                <i class="delete sign icon"></i>
              </button>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="ui divider"></div>
        <div class="description">
          <p class="design description">
            {% if design.description %}{{ design.description }}{% else %}No Description{% endif %}
          </p>
          <p class="time">{{ info.datetime }}</p>
        </div>
        <div class="ui tiny progress indicating" data-value="{{ design.state }}" data-total="5">
          <div class="bar"></div>
          <div class="label">
            {% if design.state == 1 %}
            Search
            {% elif design.state == 2 %}
            Adjustment
            {% elif design.state == 3 %}
            Simulation
            {% elif design.state == 4 %}
            Promoter
            {% elif design.state == 5 %}
            Experimental results
            {% endif %}
          </div>
        </div>
      </div> <!-- design card -->

      <div class="ui styled fluid accordion">
        <div class="title active">
          <i class="dropdown icon"></i>
          Search
        </div>
        <div class="content active">
          <p class="transition visible">
            <div class="ui grid">
              <div class="ui row">
                <div class="column">
                  <div class="ui row make-row">
                    <div class="ui column">
                      <table class="ui very basic table">
                        <thead>
                          <tr>
                            <th class="three wide">Targets</th>
                            <th class="two wide">Lower bound (mol/L)</th>
                            <th class="two wide">Upper bound (mol/L)</th>
                            <th class="one wide">Concentration MAX</th>
                          </tr>
                        </thead>
                        <tbody id="make-tbody">
                          <tr class="make-line">
                            <td class="left aligned">
                              WATER
                            </td>
                            <td class="center aligned">
                              0.2
                            </td>
                            <td class="center aligned">
                              9.7
                            </td>
                            <td class="center aligned">
                              <div class="ui toggle checkbox max">
                                <input type="checkbox">
                                <label></label>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div> <!-- row 1 make matter -->
                  <div class="ui divider make-row"></div>
                  <div class="ui row resolve-row">
                    <div class="ui column fluid">
                      <table class="ui very basic table">
                        <thead>
                          <tr>
                            <th class="one wide">Targets</th>
                            <th class="three wide">Concentration (mol/L)</th>
                          </tr>
                        </thead>
                        <tbody id="resolve-tbody">
                          <tr class="resolve-line">
                            <td class="left aligned">
                              WATER CARE-2345
                            </td>
                            <td class="left aligned">
                              5.6
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div> <!-- row 2 resolve matter -->
                  <!-- other settings -->
                  <div class="ui divider resolve-row"></div>
                </div>
              </div> <!-- matters row -->

              <div class="ui row divided">
                <div class="ui column sixteen wide">
                  <label><b>Environmental Mircobiota</b></label>
                  <div class="field">
                    <div class="ui env labels">
                    </div>
                  </div>
                </div>
              </div>
              <div class="ui row divided">
                <div class="ui column four wide">
                  <label><b>Time (Mins)</b></label>
                  <div class="field">9.3</div>
                </div>
                <div class="ui column four wide">
                  <label><b>Medium</b></label>
                  <div class="field">Long-Medium-Name</div>
                </div>
              </div>
            </div>
          </p>
        </div>
        <div class="title">
          <i class="dropdown icon"></i>
          Step 2
        </div>
        <div class="content">
          <p class="transition hidden">一大堆图表，先不放</p>
        </div>
        <div class="title">
          <i class="dropdown icon"></i>
          Step 3
        </div>
        <div class="content">
          <p class="transition hidden">
            <div class="ui column grid state">
              <div class="ui four wide column">
                <div class="ui inverted vertical menu fluid" id="state-3-menu">
                </div>
              </div>
              <div class="twelve wide column fluid">
                <div class="ui segment" id="state-3-content">
                  <div class="ui grid">
                    <div class="ui row equal width">
                      <div class="ui column center aligned">
                        <canvas id="myChart"></canvas>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div> <!-- state grid -->
          </p>
        </div>
        <div class="title">
          <i class="dropdown icon"></i>
          Step 4
        </div>
        <div class="content">
          <p class="transition hidden">
            <button class="ui green button">
              <i class="download icon"></i>
              Download Protocal
            </button>
          </p>
        </div>
        <div class="title">
          <i class="dropdown icon"></i>
          Step 5
        </div>
        <div class="content">
          <p class="transition hidden">实验数据反馈</p>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}


{% block javascript %}
<script type="text/javascript" src="/static/js/detail.js"></script>
<script type="text/javascript" src="/static/js/Chart.min.js"></script>
{% endblock %}